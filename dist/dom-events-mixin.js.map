{"version":3,"file":"dom-events-mixin.js","sources":["../node_modules/matches-selector/index.js","../src/lib/event_registry.js","../src/index.js"],"sourcesContent":["'use strict';\n\nvar proto = typeof Element !== 'undefined' ? Element.prototype : {};\nvar vendor = proto.matches\n  || proto.matchesSelector\n  || proto.webkitMatchesSelector\n  || proto.mozMatchesSelector\n  || proto.msMatchesSelector\n  || proto.oMatchesSelector;\n\nmodule.exports = match;\n\n/**\n * Match `el` to `selector`.\n *\n * @param {Element} el\n * @param {String} selector\n * @return {Boolean}\n * @api public\n */\n\nfunction match(el, selector) {\n  if (!el || el.nodeType !== 1) return false;\n  if (vendor) return vendor.call(el, selector);\n  var nodes = el.parentNode.querySelectorAll(selector);\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] == el) return true;\n  }\n  return false;\n}\n","import matches from 'matches-selector';\n\nexport function registerEvent(source, name){\n    source._events = source._events || {};\n    source._events[name] = source._events[name] || [];\n}\n\nexport function getEventInfo(name, delegate, listener, useCapture, {\n    once = false\n} = {}){\n\n    let userListener;\n    let source = this;\n    let info = {\n        name,\n        once\n    };\n\n    if(typeof delegate !== 'string'){\n        useCapture = listener;\n        listener = delegate;\n        delegate = null;\n    }\n\n    if(delegate){\n        if(once){\n            userListener = listener;\n            listener = function(event){\n                if(matches(event.target, delegate)){\n                    removeEvent(source, info);\n                    return userListener.call(this, event);\n                }\n            };\n        }else{\n            userListener = listener;\n            listener = function(event){\n                if(matches(event.target, delegate)){\n                    return userListener.call(this, event);\n                }\n            };\n        }\n    }else if(once){\n        userListener = listener;\n        listener = function(event){\n            removeEvent(source, info);\n            return userListener.call(this, event);\n        };\n    }\n\n    return Object.assign(info, {\n        listener,\n        userListener,\n        useCapture,\n        delegate\n    });\n}\n\nexport function addEvent(source, event){\n    source._events[event.name].push(event);\n    source.element.addEventListener(event.name, event.listener, event.useCapture);\n}\n\nexport function removeEvent(source, event){\n    if(source._events === void 0) return;\n    if(source._events[event.name] === void 0) return;\n\n    let events = source._events[event.name];\n\n    for(let i=0; i<events.length; i++){\n        if(events[i].userListener === event.userListener){\n            source.element.removeEventListener(\n                name, event.listener, event.useCapture);\n            source._events[event.name].splice(i, 1);\n            return;\n        }\n    }\n}\n","import {\n    getEventInfo,\n    registerEvent,\n    addEvent,\n    removeEvent\n} from './lib/event_registry.js';\n\nconst props = {\n    _delegated: [],\n    on(name, delegate, listener, useCapture){\n        const info = getEventInfo.apply(null, arguments);\n        registerEvent(this, name);\n        addEvent(this, info);\n    },\n    off(name, delegate, listener, useCapture){\n        const info = getEventInfo.apply(null, arguments);\n        removeEvent(this, info);\n    }\n    /*on(name, delegate, listener, useCapture){\n        return on(this, getEventInfo.apply(null,arguments));\n    },\n    off(name, delegate, listener, useCapture){\n        return off(this, getEventInfo.apply(null, arguments));\n    },\n    matches(selector){\n        return matches(this.element, selector);\n    },\n    key(keys, listener){\n        return keyed(this, keys, listener);\n    },\n    observe(event){\n        return new Observable({\n\n        });\n    }*/\n};\n\nexport function mixin(dest){\n    console.log(props)\n    Object.assign(dest, props);\n    return dest;\n}\n\nexport function mixinDOMEvents(dest){\n    return mixin(dest);\n}\n\nexport { props };\n\nfunction hasDelegate(args){\n    return (typeof args[1] === 'string'\n    && typeof args[2] === 'function');\n}\n"],"names":["let","matches","const"],"mappings":"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"}