{"version":3,"file":"dom-events-mixin.min.js","sources":["../node_modules/object-assign/index.js","../src/lib/keys.js","../src/lib/event_registry.js","../src/index.js","../node_modules/matches-selector/index.js","../src/lib/event_observer.js","../src/lib/keynames.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import keynames from './keynames.js';\n\nfunction keyFrom(event){\n\n    if(event.key !== void 0){\n        return event.key.toLowerCase();\n    }\n\n    return (keynames[event.which]\n        || String.fromCharCode(event.keyCode).toLowerCase());\n}\n\nconst setOp = (map, list, name)=>{\n    let index;\n    if((index = list.indexOf(name)) !== -1){\n        /*Object.defineProperty(map, name, {\n            value: true\n        });*/\n        map[name] = true;\n        map.modifiers = true;\n        list.splice(index, 1);\n    }\n};\n\nexport default class Keys {\n    constructor(keys){\n        this.sequence = keys;\n        let list = keys.split('+');\n        setOp(this, list, 'ctrl');\n        setOp(this, list, 'alt');\n        setOp(this, list, 'shift');\n        setOp(this, list, 'cmd');\n        this.key = list[0];\n\n        this.matchModifiers = function(event){\n            return ((event.ctrlKey || undefined) == this.ctrl &&\n            (event.altKey || undefined) == this.alt &&\n            (event.shiftKey || undefined) == this.shift);\n        };\n\n        if(typeof this.cmd === 'boolean'){\n            //supporting ctrl and meta for mac\n            this.matchModifiers = function(event){\n                return ((event.ctrlKey || event.metaKey) &&\n                (event.altKey || undefined) == this.alt &&\n                (event.shiftKey || undefined) == this.shift);\n            };\n        }\n\n        //Some times a visible key is used\n        this.matchSequence = function(event){\n            if(this.key === keyFrom(event)){\n                return this.matchModifiers(event);\n            }\n        };\n\n        if(!this.key){\n            this.matchSequence = this.matchModifiers;\n        }\n    }\n    match(event){\n        return this.matchSequence(event);\n    }\n}\n","import matches from 'matches-selector';\nimport objectAssign from 'object-assign';\nimport EventObserver from './event_observer.js';\nimport Keys from './keys.js';\n\nexport function registerEvent(source, name){\n    source._events = source._events || {};\n    source._events[name] = source._events[name] || [];\n}\n\nfunction initInfo(name){\n    const info = {keys: null, name};\n    /*let keys;\n    let maybeKeys = name.split(':').map(s=>s.trim());\n    if(maybeKeys.length > 1){\n        [keys, name] = maybeKeys;\n        info.keys = new Keys(keys);\n    }*/\n\n    info.names = name.split(' ');\n\n    return info;\n}\n\nconst layers = {\n    delegate(fire, delegate){\n        return function(event){\n            if(matches(event.target, delegate)){\n                return fire.call(this, event);\n            }\n        };\n    },\n    debounce(fire, delay){\n        let timer = null;\n        return function(event){\n            clearTimeout(timer);\n            timer = setTimeout(()=>{\n                fire.call(this, event);\n            }, delay);\n        };\n    },\n    throttle(fire, wait){\n        let rtn, last = 0, first = false, timeoutID;\n\n        const reset = ()=>{\n            timeoutID = 0;\n            last = Date.now();\n        };\n\n        return function(event){\n            let delta = new Date() - last;\n\n            if(!first){\n                first = true;\n                reset();\n                fire.call(this, event);\n                return;\n            }\n\n            if(!timeoutID){\n                if(delta >= wait){\n                    reset();\n                    rtn = fire.call(this, event);\n                }else{\n                    timeoutID = setTimeout(()=>{\n                        reset();\n                        rtn = fire.call(this, event);\n                    }, wait - delta);\n                }\n            }\n            return rtn;\n        };\n    },\n    contain(fire){\n        return function(event){\n\n            let rect = this.getBoundingClientRect();\n            if (event.clientX >= rect.left\n                && event.clientX <= rect.right\n                && event.clientY >= rect.top\n                && event.clientY <= rect.bottom) {\n              // Mouse is inside element.\n              return fire.call(this, event);\n            }\n        };\n    },\n    once(source, fire, info){\n        return function(event){\n            removeEvent(source, info);\n            return fire.call(this, event);\n        };\n    },\n    object(handler){\n        return function(event){\n            return (handler.handleEvent).call(handler, event);\n        };\n    },\n    main(handler){\n        return handler;\n    }\n};\n\nexport function getEventInfo(name, delegate, handler, options){\n\n    let userHandler = handler;\n    let source = this;\n    let info = initInfo(name);\n\n    if(typeof delegate !== 'string'){\n        options = handler;\n        userHandler = handler = delegate;\n        delegate = null;\n    }\n\n    let {\n        once, capture = false, throttle = 0, debounce = 0\n    } = typeof options === 'object' ? options : {};\n\n    //Last caller is created first\n    //All layered like an onion from the inside out on creation\n    //Pealed from the outside in on event firing\n\n    handler = layers.main(handler);\n\n    if(typeof handler === 'object'){\n        if(typeof handler.handleEvent !== 'object'){\n            throw new TypeError(\n                handler.handleEvent + ' on ' + handler +\n                ' is not a function'\n            );\n        }\n\n        handler = layers.object(handler);\n    }\n\n    //Prefer throttle over debounce\n    if(throttle && !(throttle !== throttle)){\n        handler = layers.throttle(handler, parseInt(throttle));\n    }else\n    if(debounce && !(debounce !== debounce)){\n        handler = layers.debounce(handler, parseInt(debounce));\n    }\n\n    //once runs before async layers,\n    //and after sync layers\n    if(!!once){\n        handler = layers.once(source, handler, info);\n    }\n    /*\n    if(!!info.keys){\n        handler = layers.keys(handler, info.keys);\n    }*/\n\n    if(typeof delegate === 'string'){\n        try{\n            document.querySelector(delegate);\n        }catch(e){\n            throw new Error('delegate selector Error \\n'+e.message);\n        }\n        handler = layers.delegate(handler, delegate);\n    }\n\n    return objectAssign(info, {\n        handler,\n        //Matching properties for removal\n        userHandler,\n        capture,\n        delegate,\n        throttle,\n        debounce\n    });\n}\n\nexport function addEvent(source, event){\n    source._events[event.name].push(event);\n    event.names.forEach(name=>{\n        source.element.addEventListener(name, event.handler, event.capture);\n    });\n}\n\nexport function removeEvent(source, event){\n    if(source._events === void 0) return;\n    if(source._events[event.name] === void 0) return;\n\n    let events = source._events[event.name];\n\n    for(let i=0; i<events.length; i++){\n        if(\n            events[i].userHandler === event.userHandler &&\n            events[i].capture === event.capture &&\n            events[i].delegate === event.delegate &&\n            events[i].throttle === event.throttle &&\n            events[i].debounce === event.debounce\n        ){\n            events[i].names.forEach(name=>{\n                source.element.removeEventListener(\n                    name, event.handler, event.capture);\n            });\n\n            source._events[event.name].splice(i, 1);\n            if(!source._events[event.name].length){\n                delete source._events[event.name];\n            }\n            return;\n        }\n    }\n}\n\nexport function trigger(source, event){\n    source.element.dispatchEvent(event);\n}\n","import objectAssign from 'object-assign';\nimport {\n    getEventInfo,\n    registerEvent,\n    addEvent,\n    removeEvent,\n    trigger\n} from './lib/event_registry.js';\n\nconst props = {\n    _delegated: [],\n    on(name, delegate, listener, options){\n        const info = getEventInfo.apply(null, arguments);\n        registerEvent(this, name);\n        addEvent(this, info);\n        return this;\n    },\n    off(name, delegate, listener, options){\n        const info = getEventInfo.apply(null, arguments);\n        removeEvent(this, info);\n        return this;\n    },\n    once(name, delegate, listener, options){\n        if(typeof delegate === 'function'){\n            listener = delegate;\n            options = listener;\n        }\n        options = options || {};\n        options.once = true;\n        const info = getEventInfo.call(this, name, delegate, listener, options);\n        registerEvent(this, name);\n        addEvent(this, info);\n        return this;\n    },\n    trigger(event){\n        trigger(this, event);\n        return this;\n    },\n    matches(selector){\n        return matches(this.element, selector);\n    },\n    observe(event){\n        //This is here to remind us that native observables\n        //are on the horizon.\n        /*\n        return new Observable(observer=>{\n            //using events from this prototype\n            //emit the observable value\n        });\n        */\n    }\n};\n\nexport function mixin(dest){\n    objectAssign(dest, props);\n    return dest;\n}\n\nexport function mixinDOMEvents(dest){\n    return mixin(dest);\n}\n\nexport { props };\n\nfunction hasDelegate(args){\n    return (typeof args[1] === 'string'\n    && typeof args[2] === 'function');\n}\n","'use strict';\n\nvar proto = typeof Element !== 'undefined' ? Element.prototype : {};\nvar vendor = proto.matches\n  || proto.matchesSelector\n  || proto.webkitMatchesSelector\n  || proto.mozMatchesSelector\n  || proto.msMatchesSelector\n  || proto.oMatchesSelector;\n\nmodule.exports = match;\n\n/**\n * Match `el` to `selector`.\n *\n * @param {Element} el\n * @param {String} selector\n * @return {Boolean}\n * @api public\n */\n\nfunction match(el, selector) {\n  if (!el || el.nodeType !== 1) return false;\n  if (vendor) return vendor.call(el, selector);\n  var nodes = el.parentNode.querySelectorAll(selector);\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] == el) return true;\n  }\n  return false;\n}\n","export default class EventObserver {\n    constructor({\n        handle = null,\n        remove = ()=>{}\n    } = {}){\n        this._handle = handle;\n        this._remove = remove;\n    }\n    emit(ctx, event){\n        return this._handle(ctx, event);\n    }\n    remove(){\n        this._remove();\n    }\n}\n","const keynames = {\n  8   : 'backspace',\n  9   : 'tab',\n  13  : 'enter',\n  16  : 'shift',\n  17  : 'ctrl',\n  18  : 'alt',\n  20  : 'capslock',\n  27  : 'esc',\n  32  : 'space',\n  33  : 'pageup',\n  34  : 'pagedown',\n  35  : 'end',\n  36  : 'home',\n  37  : 'left',\n  38  : 'up',\n  39  : 'right',\n  40  : 'down',\n  45  : 'ins',\n  46  : 'del',\n  91  : 'meta',\n  93  : 'meta',\n  224 : 'meta'\n};\n\nexport default keynames;\n"],"names":["toObject","val","undefined","TypeError","Object","keyFrom","event","key","toLowerCase","keynames","which","String","fromCharCode","keyCode","registerEvent","source","name","_events","initInfo","const","info","keys","names","split","getEventInfo","delegate","handler","options","let","userHandler","this","once","layers","main","handleEvent","object","throttle","parseInt","debounce","document","querySelector","e","Error","message","objectAssign","capture","addEvent","push","forEach","element","addEventListener","removeEvent","events","i","length","removeEventListener","splice","trigger","dispatchEvent","mixin","dest","props","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","getOwnPropertyNames","test2","map","n","join","test3","letter","err","shouldUseNative","target","from","symbols","to","s","arguments","call","proto","Element","vendor","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","el","selector","nodeType","nodes","parentNode","querySelectorAll","EventObserver","ref","_handle","handle","_remove","remove","emit","ctx","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","setOp","list","index","indexOf","modifiers","sequence","matchModifiers","ctrlKey","ctrl","altKey","alt","shiftKey","shift","cmd","metaKey","matchSequence","match","fire","delay","timer","clearTimeout","setTimeout","wait","rtn","timeoutID","last","first","reset","Date","now","delta","contain","rect","getBoundingClientRect","clientX","left","right","clientY","top","bottom","_delegated","on","listener","apply","off","observe"],"mappings":"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"}