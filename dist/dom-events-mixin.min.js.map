{"version":3,"file":"dom-events-mixin.min.js","sources":["../src/lib/event_registry.js","../src/index.js","../node_modules/matches-selector/index.js"],"sourcesContent":["import matches from 'matches-selector';\n\nexport function registerEvent(source, name){\n    source._events = source._events || {};\n    source._events[name] = source._events[name] || [];\n}\n\nexport function getEventInfo(name, delegate, listener, useCapture, {\n    once = false\n} = {}){\n\n    let userListener;\n    let source = this;\n    let info = {\n        name,\n        once\n    };\n\n    if(typeof delegate !== 'string'){\n        useCapture = listener;\n        listener = delegate;\n        delegate = null;\n    }\n\n    if(delegate){\n        if(once){\n            userListener = listener;\n            listener = function(event){\n                if(matches(event.target, delegate)){\n                    removeEvent(source, info);\n                    return userListener.call(this, event);\n                }\n            };\n        }else{\n            userListener = listener;\n            listener = function(event){\n                if(matches(event.target, delegate)){\n                    return userListener.call(this, event);\n                }\n            };\n        }\n    }else if(once){\n        userListener = listener;\n        listener = function(event){\n            removeEvent(source, info);\n            return userListener.call(this, event);\n        };\n    }\n\n    return Object.assign(info, {\n        listener,\n        userListener,\n        useCapture,\n        delegate\n    });\n}\n\nexport function addEvent(source, event){\n    source._events[event.name].push(event);\n    source.element.addEventListener(event.name, event.listener, event.useCapture);\n}\n\nexport function removeEvent(source, event){\n    if(source._events === void 0) return;\n    if(source._events[event.name] === void 0) return;\n\n    let events = source._events[event.name];\n\n    for(let i=0; i<events.length; i++){\n        if(events[i].userListener === event.userListener){\n            source.element.removeEventListener(\n                name, event.listener, event.useCapture);\n            source._events[event.name].splice(i, 1);\n            return;\n        }\n    }\n}\n","import {\n    getEventInfo,\n    registerEvent,\n    addEvent,\n    removeEvent\n} from './lib/event_registry.js';\n\nconst props = {\n    _delegated: [],\n    on(name, delegate, listener, useCapture){\n        const info = getEventInfo.apply(null, arguments);\n        registerEvent(this, name);\n        addEvent(this, info);\n    },\n    off(name, delegate, listener, useCapture){\n        const info = getEventInfo.apply(null, arguments);\n        removeEvent(this, info);\n    }\n    /*on(name, delegate, listener, useCapture){\n        return on(this, getEventInfo.apply(null,arguments));\n    },\n    off(name, delegate, listener, useCapture){\n        return off(this, getEventInfo.apply(null, arguments));\n    },\n    matches(selector){\n        return matches(this.element, selector);\n    },\n    key(keys, listener){\n        return keyed(this, keys, listener);\n    },\n    observe(event){\n        return new Observable({\n\n        });\n    }*/\n};\n\nexport function mixin(dest){\n    console.log(props)\n    Object.assign(dest, props);\n    return dest;\n}\n\nexport function mixinDOMEvents(dest){\n    return mixin(dest);\n}\n\nexport { props };\n\nfunction hasDelegate(args){\n    return (typeof args[1] === 'string'\n    && typeof args[2] === 'function');\n}\n","'use strict';\n\nvar proto = typeof Element !== 'undefined' ? Element.prototype : {};\nvar vendor = proto.matches\n  || proto.matchesSelector\n  || proto.webkitMatchesSelector\n  || proto.mozMatchesSelector\n  || proto.msMatchesSelector\n  || proto.oMatchesSelector;\n\nmodule.exports = match;\n\n/**\n * Match `el` to `selector`.\n *\n * @param {Element} el\n * @param {String} selector\n * @return {Boolean}\n * @api public\n */\n\nfunction match(el, selector) {\n  if (!el || el.nodeType !== 1) return false;\n  if (vendor) return vendor.call(el, selector);\n  var nodes = el.parentNode.querySelectorAll(selector);\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] == el) return true;\n  }\n  return false;\n}\n"],"names":["registerEvent","source","name","_events","getEventInfo","delegate","listener","useCapture","ref","let","userListener","this","info","once","event","matches","target","removeEvent","call","Object","assign","addEvent","push","element","addEventListener","events","i","length","removeEventListener","splice","mixin","dest","console","log","props","proto","Element","prototype","vendor","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","el","selector","nodeType","nodes","parentNode","querySelectorAll","_delegated","on","const","apply","arguments","off"],"mappings":"0BAEO,SAASA,EAAcC,EAAQC,GAClCD,EAAOE,QAAUF,EAAOE,YACxBF,EAAOE,QAAQD,GAAQD,EAAOE,QAAQD,OAG1C,SAAgBE,EAAaF,EAAMG,EAAUC,EAAUC,EAAYC,mDACxD,GAGPC,IAAIC,EACAT,EAASU,KACTC,GACAV,KAAAA,EACAW,KAAAA,GAkCJ,MA/BuB,iBAAbR,IACNE,EAAaD,EACbA,EAAWD,EACXA,EAAW,MAGZA,EACIQ,GACCH,EAAeJ,EACfA,EAAW,SAASQ,GAChB,GAAGC,EAAQD,EAAME,OAAQX,GAErB,OADAY,EAAYhB,EAAQW,GACbF,EAAaQ,KAAKP,KAAMG,MAIvCJ,EAAeJ,EACfA,EAAW,SAASQ,GAChB,GAAGC,EAAQD,EAAME,OAAQX,GACrB,OAAOK,EAAaQ,KAAKP,KAAMG,KAItCD,IACLH,EAAeJ,EACfA,EAAW,SAASQ,GAEhB,OADAG,EAAYhB,EAAQW,GACbF,EAAaQ,KAAKP,KAAMG,KAIhCK,OAAOC,OAAOR,GACjBN,SAAAA,EACAI,aAAAA,EACAH,WAAAA,EACAF,SAAAA,IAIR,SAAgBgB,EAASpB,EAAQa,GAC7Bb,EAAOE,QAAQW,EAAMZ,MAAMoB,KAAKR,GAChCb,EAAOsB,QAAQC,iBAAiBV,EAAMZ,KAAMY,EAAMR,SAAUQ,EAAMP,YAGtE,SAAgBU,EAAYhB,EAAQa,GAChC,QAAsB,IAAnBb,EAAOE,cACwB,IAA/BF,EAAOE,QAAQW,EAAMZ,MAIxB,IAAIO,IAFAgB,EAASxB,EAAOE,QAAQW,EAAMZ,MAE1BwB,EAAE,EAAGA,EAAED,EAAOE,OAAQD,IAC1B,GAAGD,EAAOC,GAAGhB,eAAiBI,EAAMJ,aAIhC,OAHAT,EAAOsB,QAAQK,oBACX1B,KAAMY,EAAMR,SAAUQ,EAAMP,iBAChCN,EAAOE,QAAQW,EAAMZ,MAAM2B,OAAOH,EAAG,GCnCjD,SAAgBI,EAAMC,GAGlB,OAFAC,QAAQC,IAAIC,GACZf,OAAOC,OAAOW,EAAMG,GACbH,ECtCX,IAAII,EAA2B,oBAAZC,QAA0BA,QAAQC,aACjDC,EAASH,EAAMpB,SACdoB,EAAMI,iBACNJ,EAAMK,uBACNL,EAAMM,oBACNN,EAAMO,mBACNP,EAAMQ,mBAaX,SAAeC,EAAIC,GACjB,IAAKD,GAAsB,IAAhBA,EAAGE,SAAgB,OAAO,EACrC,GAAIR,EAAQ,OAAOA,EAAOpB,KAAK0B,EAAIC,GAEnC,IAAK,IADDE,EAAQH,EAAGI,WAAWC,iBAAiBJ,GAClCnB,EAAI,EAAGA,EAAIqB,EAAMpB,OAAQD,IAChC,GAAIqB,EAAMrB,IAAMkB,EAAI,OAAO,EAE7B,OAAO,GDrBHV,GACFgB,cACAC,YAAGjD,EAAMG,EAAUC,EAAUC,GACzB6C,IAAMxC,EAAOR,EAAaiD,MAAM,KAAMC,WACtCtD,EAAcW,KAAMT,GACpBmB,EAASV,KAAMC,IAEnB2C,aAAIrD,EAAMG,EAAUC,EAAUC,GAE1BU,EAAYN,KADCP,EAAaiD,MAAM,KAAMC,yCA4B9C,SAA+BvB,GAC3B,OAAOD,EAAMC"}